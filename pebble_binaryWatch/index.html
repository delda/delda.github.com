<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="Configuration page for BinaryWatch, a Pebble watchface">
		<meta name="author" content="Davide Dell'Erba <delda@virgilio.it>">

		<title>Binary Watch configuration</title>

		<link rel="stylesheet" href="css/normalize.css" />
		<link rel="stylesheet" href="css/foundation.css" />
		<link rel="stylesheet" href="css/app.css" />

		<script src="js/vendor/modernizr.js"></script>
	</head>
	<body>
		<div class="row delda_dkgrey">
			<div class="small-12 columns">
				<h1 class="show-for-small-up">Binary Watch configuration</h1>
			</div>
		</div>
		<div class="row">
			<div class="small-12 cloumns">
				<div data-alert class="alert-box alert radius" id="version_alert">
					There is a new version of Binary Watch. Be sure to install it because some settings will not work until you update to the last version.</br>
					See <a href="#" data-reveal-id="versionInformation">version information</a>.
					<a href="#" class="close">&times;</a>
				</div>	
			</div>
		</div>
		<form id="config">
			<div class="row delda_subtitle">
				<div class="small-12 columns">
					Clock design
				</div>
			</div>
			<div class="row delda_subtitle">
				<div class="small-6 columns">
					<div class="delda_option">
						Shapes
					</div>
					<div class="delda_suboption">
						Choose dots shape
					</div>
				</div>
				<div class="small-6 columns">
					<select name="shape">
						<option value="0" class="delda_shape delda_shape_circle">
							Circle
						</option>
						<option value="1" class="delda_shape delda_shape_square">
							Square
						</option>
					</select>
				</div>
			</div>
			<div class="row delda_subtitle">
				<div class="small-6 columns">
					<div class="delda_option">
						Colors
					</div>
					<div class="delda_suboption">
						Choose your colours combination
					</div>
				</div>
				<div class="small-6 columns">
					<select name="color">
						<option value="0" class="delda_shape delda_shape_circle delda_basalt">
							Ligth
						</option>
						<option value="1" class="delda_shape delda_shape_square delda_basalt">
							Dark
						</option>
						<option value="0" class="delda_shape delda_shape_circle delda_aplite">
							Ligth
						</option>
						<option value="1" class="delda_shape delda_shape_square delda_aplite">
							Dark
						</option>
					</select>
				</div>
			</div>
			<div class="row delda_subtitle">
				<div class="small-12 columns">
					Optional features
				</div>
			</div>
			<div class="row delda_subtitle">
				<div class="small-6 columns">
					<div class="delda_option">
						Numbers
					</div>
					<div class="delda_suboption">
						Time in decimal format on the background
					</div>
				</div>
				<div class="small-6 columns">
					<div class="switch small">
						<input id="numbersCheckbox" type="checkbox" >
						<label for="numbersCheckbox"></label>
					</div> 
				</div>
			</div>
			<div class="row">
				<div class="small-12 columns center">
					<a href="pebblejs://close" class="delda_cancel_link">Cancel</a>
					<div class="button tiny" id="b-submit">Save</div>
				</div>
			</div>
		</form>

		<div id="versionInformation" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
			<div class="row">
				<div class="small-12 columns delda_modal_title">
					Binary Watch changelog
				</div>
			</div>
				<!-- VERSION 2.4 -->
			<div class="row delda_modal_version">
				<div class="small-12 columns">
					<div class="left">
						VERSION 2.4
					</div>
					<div class="right">
						JUL 22, 2015
					</div>
				</div>
			</div>
			<div class="row delda_modal_text">
				<div class="small-12 columns">
					v2.4</br>
					* First color release
				</div>
			</div>
				<!-- VERSION 2.3 -->
			<div class="row delda_modal_version">
				<div class="small-12 columns">
					<div class="left">
						VERSION 2.3
					</div>
					<div class="right">
						JUL 16, 2015
					</div>
				</div>
			</div>
			<div class="row delda_modal_text">
				<div class="small-12 columns">
					v2.3</br>
					* Added settings communication from smartwatch to smartphone
				</div>
			</div>
				<!-- VERSION 2.2 -->
			<div class="row delda_modal_version">
				<div class="small-12 columns">
					<div class="left">
						VERSION 2.2
					</div>
					<div class="right">
						JUL 13, 2015
					</div>
				</div>
			</div>
			<div class="row delda_modal_text">
				<div class="small-12 columns">
					v2.2</br>
					* Choose your favorite shape: you can get circle or square
				</div>
			</div>
				<!-- VERSION 2.1 -->
			<div class="row delda_modal_version">
				<div class="small-12 columns">
					<div class="left">
						VERSION 2.1
					</div>
					<div class="right">
						JUN 08, 2015
					</div>
				</div>
			</div>
			<div class="row delda_modal_text">
				<div class="small-12 columns">
					v2.1</br>
					* Added supports 12/24 hr 
				</div>
			</div>
				<!-- VERSION 2.0 -->
			<div class="row delda_modal_version">
				<div class="small-12 columns">
					<div class="left">
						VERSION 2.0
					</div>
					<div class="right">
						JUN 05, 2015
					</div>
				</div>
			</div>
			<div class="row delda_modal_text">
				<div class="small-12 columns">
					v2.0</br>
					* Upgrade to SDK 3.0
				</div>
			</div>
				<!-- VERSION 1.2 -->
			<div class="row delda_modal_version">
				<div class="small-12 columns">
					<div class="left">
						VERSION 1.2
					</div>
					<div class="right">
						MAR 13, 2015
					</div>
				</div>
			</div>
			<div class="row delda_modal_text">
				<div class="small-12 columns">
					v1.2</br>
					* First complete release
				</div>
			</div>
			<a class="close-reveal-modal" aria-label="Close">&#215;</a>
		</div>

		<script src="js/vendor/jquery.js"></script>
		<script src="js/foundation.min.js"></script>
		<script>
			var version = '2.4';

			$(document).foundation();

			$(document).ready(function(){
				getProps = queryString();
				for(var test in getProps){
					setProperty(test, getProps[test]);
				}
			});

			function queryString(){
				var getProps = {};
				var query = window.location.search.substring(1);
				var vars = query.split("&");
				for (var i=0; i<vars.length; i++){
					var pair = vars[i].split("=");
					// If first entry with this name
					if (typeof getProps[pair[0]] === "undefined") {
						getProps[pair[0]] = decodeURIComponent(pair[1]);
					// If second entry with this name
					} else if (typeof getProps[pair[0]] === "string") {
						var arr = [ getProps[pair[0]],decodeURIComponent(pair[1]) ];
						getProps[pair[0]] = arr;
					// If third or later entry with this name
					} else {
						getProps[pair[0]].push(decodeURIComponent(pair[1]));
					}
				}
				return getProps;
			}

			function saveOptions() {
				var params = {};
				$('#config').serializeArray().forEach(function(pair) {
					params[pair.name] = pair.value;
				});

				return params;
			}

			function setProperty(property, value){
				platform = 'basalt';
				switch(property){
					case 'version':
						if(version !== value){
							$('#version_alert').show();
						}
						break;
					case 'platform':
						platform = (value > 1 || value < 0) ? 1 : value;
						platform = (platform == 0) ? 'aplite' : 'basalt';
						$('[name=color] .delda_'+platform).remove();
						break;
					case 'shape':
						$($('[name=shape]').val(value)).prop('selected', true);
						break;
					case 'color':
						$($('[name=color]').val(value)).prop('selected', true);
						break;
					case 'numbers':
						if(value == 1){
							$('numbersCheckbox').attr('checked', true);
						}
						break;
				}
			}

			$("#b-submit").click(function() {
				var location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(saveOptions()));
				document.location = location;
			});
		</script>
	</body>
</html>

<!---
Date
Show the current date on top of the screen

Background time
Show the time in background

Battery
You can see battery icon never, on change or always

Bluetooth
You can see bluetooth icon status never, on disconnect or always

Flip phone
???
-->
