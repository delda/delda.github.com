<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="Configuration page for BinaryWatch, a Pebble watchface">
		<meta name="author" content="Davide Dell'Erba <delda@virgilio.it>">

		<title>Binary Watch configuration</title>

		<link rel="stylesheet" href="css/normalize.css" />
		<link rel="stylesheet" href="css/foundation.css" />
		<link rel="stylesheet" href="css/app.css" />

		<script src="js/vendor/modernizr.js"></script>
	</head>
	<body>
		<div class="row delda_dkgrey">
			<div class="small-12 columns">
				<h1 class="show-for-small-up">Binary watch configuration</h1>
			</div>
		</div>
		<form id="config">
			<div class="row delda_subtitle">
				<div class="small-12 columns">
					Clock design
				</div>
			</div>
			<div class="row delda_subtitle">
				<div class="small-6 columns">
					<div class="delda_option">
						Shapes
					</div>
					<div class="delda_suboption">
						Choose dots shape
					</div>
				</div>
				<div class="small-6 columns">
					<select name="shape">
						<option value="1" class="delda_shape delda_shape_circle">
							Circle
						</option>
						<option value="2" class="delda_shape delda_shape_square">
							Square
						</option>
					</select>
				</div>
			</div>
			<div class="row delda_subtitle">
				<div class="small-6 columns">
					<div class="delda_option">
						Colors
					</div>
					<div class="delda_suboption">
						Choose your colours combination
					</div>
				</div>
				<div class="small-6 columns">
					<select name="color">
						<option value="1" class="delda_shape delda_shape_circle">
							Ligth
						</option>
						<option value="2" class="delda_shape delda_shape_square">
							Dark
						</option>
					</select>
				</div>
			</div>
	<!--
			<div class="row delda_subtitle">
				<div class="small-12 columns">
					Optional features
				</div>
			</div>
	-->
			<div class="row">
				<div class="small-12 columns center">
					<a href="pebblejs://close" class="delda_cancel_link">Cancel</a>
					<div class="button tiny" id="b-submit">Save</div>
				</div>
			</div>
		</form>
		<script src="js/vendor/jquery.js"></script>
		<script src="js/foundation.min.js"></script>
		<script>
			$(document).foundation();

			function queryString(){
				var getProps = {};
				var query = window.location.search.substring(1);
				var vars = query.split("&");
				for (var i=0; i<vars.length; i++){
					var pair = vars[i].split("=");
					// If first entry with this name
					if (typeof getProps[pair[0]] === "undefined") {
						getProps[pair[0]] = decodeURIComponent(pair[1]);
					// If second entry with this name
					} else if (typeof getProps[pair[0]] === "string") {
						var arr = [ getProps[pair[0]],decodeURIComponent(pair[1]) ];
						getProps[pair[0]] = arr;
					// If third or later entry with this name
					} else {
						getProps[pair[0]].push(decodeURIComponent(pair[1]));
					}
				}
				return getProps;
			}

			function saveOptions() {
				var params = {};
				$('#config').serializeArray().forEach(function(pair) {
					params[pair.name] = pair.value;
				});

				return params;
			}

			function setProperty(property, value){
				switch(property){
					case 'shape':
						$($('[name=shape]').val(value)).prop('selected', true);
					case 'color':
						$($('[name=color]').val(value)).prop('selected', true);
				}
			}

			getProps = queryString();
			for(var test in getProps){
				setProperty(test, getProps[test]);
			}
			
			$("#b-submit").click(function() {
				var location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(saveOptions()));
				document.location = location;
			});
		</script>
	</body>
</html>

<!---
Date
Show the current date on top of the screen

Background time
Show the time in background

Battery
You can see battery icon never, on change or always

Bluetooth
You can see bluetooth icon status never, on disconnect or always

Flip phone
???
-->
